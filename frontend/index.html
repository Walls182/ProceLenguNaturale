<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Chatbot PLN</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f4; }
        .chatbox { width: 400px; margin: 50px auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px #ccc; }
        #chatlog { height: 300px; overflow-y: auto; border: 1px solid #ccc; margin-bottom: 10px; padding: 10px; background: #faf6ff; }
        .user { color: #a259d9; background: #e9d6fa; padding: 5px; border-radius: 5px; margin: 5px 0; }
        .bot { color: #6c3483; background: #f3e6fa; padding: 5px; border-radius: 5px; margin: 5px 0; }
        #userInput { width: 75%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
        button { padding: 8px 16px; border-radius: 5px; border: none; background: #a259d9; color: #fff; font-weight: bold; cursor: pointer; }
        button:hover { background: #6c3483; }
    </style>
</head>
<body>
    <div class="chatbox">
        <div id="chatlog"></div>
        <input type="text" id="userInput" placeholder="Escribe tu mensaje...">
        <button onclick="sendMessage()">Enviar</button>
    </div>
    <script>
        const input = document.getElementById('userInput');
        input.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function sendMessage() {
            const message = input.value.trim();
            if (!message) return;
            addMessage('TÃº', message, 'user');
            input.value = '';
            fetch('http://localhost:5000/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ mensaje: message })
            })
            .then(res => res.json())
            .then(data => addMessage('ChatBot', data.respuesta, 'bot'));
        }

        function addMessage(sender, text, cls) {
            const chatlog = document.getElementById('chatlog');
            chatlog.innerHTML += `<div class="${cls}"><b>${sender}:</b> ${text}</div>`;
            chatlog.scrollTop = chatlog.scrollHeight;
        }
    </script>
</body>
</html>